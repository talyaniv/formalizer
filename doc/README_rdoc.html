<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>README - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Formalizer">Formalizer</a>
    <li><a href="#label-About">About</a>
    <li><a href="#label-Install">Install</a>
    <li><a href="#label-Demo">Demo</a>
    <li><a href="#label-Usage">Usage</a>
    <li><a href="#label-Configuration">Configuration</a>
    <li><a href="#label-Very+basic+example">Very basic example</a>
    <li><a href="#label-Under+the+hood">Under the hood</a>
    <li><a href="#label-Forms-2C+Form+Fields+and+tags">Forms, Form Fields and tags</a>
    <li><a href="#label-Form+Fields">Form Fields</a>
    <li><a href="#label-Generating+user+details+form">Generating user details form</a>
    <li><a href="#label-HTML+images+and+styles">HTML images and styles</a>
    <li><a href="#label-Advanced-3A+Using+Formalizer+programatically">Advanced: Using Formalizer programatically</a>
    <li><a href="#label-Contributing+to+Formazlizer">Contributing to Formazlizer</a>
    <li><a href="#label-TODO-3A">TODO:</a>
    <li><a href="#label-Copyright">Copyright</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./Gemfile.html">Gemfile</a>
  
    <li><a href="./Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="./MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="./README_rdoc.html">README</a>
  
    <li><a href="./Rakefile.html">Rakefile</a>
  
    <li><a href="./formalizer_gemspec.html">formalizer.gemspec</a>
  
    <li><a href="./lib/tasks/formalizer_tasks_rake.html">formalizer_tasks.rake</a>
  
    <li><a href="./test/dummy/Gemfile.html">Gemfile</a>
  
    <li><a href="./test/dummy/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="./test/dummy/README_rdoc.html">README</a>
  
    <li><a href="./test/dummy/Rakefile.html">Rakefile</a>
  
    <li><a href="./test/dummy/app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="./test/dummy/app/assets/javascripts/fill_details_js.html">fill_details.js</a>
  
    <li><a href="./test/dummy/app/assets/javascripts/home_js.html">home.js</a>
  
    <li><a href="./test/dummy/app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="./test/dummy/app/assets/stylesheets/bootstrap_yeti_css.html">bootstrap_yeti.css</a>
  
    <li><a href="./test/dummy/app/assets/stylesheets/fill_details_css.html">fill_details.css</a>
  
    <li><a href="./test/dummy/app/assets/stylesheets/form_css.html">form.css</a>
  
    <li><a href="./test/dummy/app/assets/stylesheets/home_css.html">home.css</a>
  
    <li><a href="./test/dummy/config_ru.html">config.ru</a>
  
    <li><a href="./test/dummy/config/form1_html.html">form1.html</a>
  
    <li><a href="./test/dummy/config/invalid_html_formalizer_tags_without_ids_html.html">invalid_html_formalizer_tags_without_ids.html</a>
  
    <li><a href="./test/dummy/config/invalid_html_no_formalizer_tags_html.html">invalid_html_no_formalizer_tags.html</a>
  
    <li><a href="./test/dummy/db/development_sqlite3.html">development.sqlite3</a>
  
    <li><a href="./test/dummy/db/test_sqlite3.html">test.sqlite3</a>
  
    <li><a href="./test/dummy/log/development_log.html">development.log</a>
  
    <li><a href="./test/dummy/log/passenger_3000_log.html">passenger.3000.log</a>
  
    <li><a href="./test/dummy/log/test_log.html">test.log</a>
  
    <li><a href="./test/dummy/passenger_3000_pid_lock.html">passenger.3000.pid.lock</a>
  
    <li><a href="./test/dummy/public/404_html.html">404.html</a>
  
    <li><a href="./test/dummy/public/422_html.html">422.html</a>
  
    <li><a href="./test/dummy/public/500_html.html">500.html</a>
  
    <li><a href="./test/dummy/public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="./test/dummy/tmp/pids/passenger_3000_pid_lock.html">passenger.3000.pid.lock</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page README.rdoc">

<h1 id="label-Formalizer"><a href="Formalizer.html">Formalizer</a><span><a href="#label-Formalizer">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p><a href="https://badge.fury.io/gh/talyaniv%2Fformalizer"><img
src="https://badge.fury.io/gh/talyaniv%2Fformalizer.svg" alt="GitHub
version" /></a></p>

<p><img
src="https://raw.githubusercontent.com/talyaniv/formalizer/master/test/dummy/app/assets/images/formalizer.png"
/></p>

<h2 id="label-About">About<span><a href="#label-About">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="Formalizer.html">Formalizer</a> is an open-source gem for
simplifying HTML-form filling and exporting:</p>
<ul><li>
<p>Store blank contracts, agreements, disclosure sheets etc. as HTML
templates.</p>
</li><li>
<p>In form templates, wrap blank data with &lt;formalizer&gt; tags:</p>
<ul><li>
<p><strong>before:</strong> <code>name: <em>__</em></code></p>
</li><li>
<p><strong>after:</strong> <code>name: &lt;formalizer
id=&quot;name&quot;&gt;<em>__</em>&lt;/formalizer&gt;</code></p>
</li></ul>
</li><li>
<p>Get user data from any source, or simply let <a
href="Formalizer.html">Formalizer</a> generate user-input forms for you.</p>
</li><li>
<p><a href="Formalizer.html">Formalizer</a> will replace the template
&lt;formalizer&gt; tags with user data:</p>

<pre>name: &lt;formalizer id=&quot;name&quot;&gt;John D.&lt;/formalizer&gt;</pre>
</li><li>
<p>Filled forms can be exported to PDF using <a
href="https://github.com/mileszs/wicked_pdf">Wicked PDF gem</a>, or to raw
html, for additional styling.</p>
</li></ul>

<h2 id="label-Install">Install<span><a href="#label-Install">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-identifier">install</span> <span class="ruby-string">&#39;formalizer&#39;</span>
</pre>

<p>or add to your Gemfile:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;formalizer&#39;</span>
</pre>

<h2 id="label-Demo">Demo<span><a href="#label-Demo">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Clone this repo, edit the root <a href="Gemfile.html">Gemfile</a> and
uncomment the last two lines:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;wicked_pdf&#39;</span>
<span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;wkhtmltopdf-binary&#39;</span>
</pre>

<p>Start the demo:</p>

<pre>$ cd test/dummy
$ bundle install
$ rails server
$ open http://localhost:3000</pre>

<h2 id="label-Usage">Usage<span><a href="#label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-Configuration">Configuration<span><a href="#label-Configuration">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="Formalizer.html">Formalizer</a> looks for
<code>formalizer.yml</code> YAML file in config directory. If exists, it
will load the configuration, otherwise, it can be configured
programatically.</p>

<h3 id="label-Very+basic+example">Very basic example<span><a href="#label-Very+basic+example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre># config/formalizer.yml
form_fields:
  name:
    name: Your full name 
  gender:
    name: Your gender 
    field_type: enum
    enumeration:
      - Male
      - Female
      - Irellevant
    default_value: 2
forms:
  simple_form_example:
    path: &#39;An HTML template that requires a name:&lt;formalizer id=&quot;name&quot; required&gt;_____ (required)&lt;/formalizer&gt;, and an optional gender:&lt;formalizer id=&quot;gender&quot;&gt;[male, female, irrelevant] (optional)&lt;/formalizer&gt;&#39;</pre>

<p>To fill the (only) form template, we need user input for name and gender.
Here is a quick flow from user data to filled PDF file:</p>

<pre class="ruby"><span class="ruby-identifier">formalizer</span> = <span class="ruby-constant">Formalizer</span>.<span class="ruby-identifier">new</span> <span class="ruby-comment"># will load YAML configuration</span>

<span class="ruby-comment"># Filling fields with values, regardless to the template form, so they can be reusable to another template form. Since we configured gender to be enum (zero based), a Female value is 1 (0 - Male, 1 - Female, 2 - Irrelevant):</span>
<span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">fill_fields</span>({<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Michelle Markus&#39;</span>, <span class="ruby-identifier">gender</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>})

<span class="ruby-comment"># Exporting to PDF:</span>
<span class="ruby-identifier">pdf_file</span> = <span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">export_form_to_pdf</span>(:<span class="ruby-identifier">simple_form_example</span>)

<span class="ruby-comment"># Inside a controller, you can push the result to user:</span>
<span class="ruby-identifier">send_data</span> <span class="ruby-identifier">pdf_file</span>, {<span class="ruby-identifier">filename</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;simple_form_example.pdf&#39;</span>, <span class="ruby-identifier">disposition</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;attachment&#39;</span>}
</pre>

<h2 id="label-Under+the+hood">Under the hood<span><a href="#label-Under+the+hood">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-Forms-2C+Form+Fields+and+tags">Forms, Form Fields and tags<span><a href="#label-Forms-2C+Form+Fields+and+tags">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Let&#39;s say we have three different form templates:</p>
<ol><li>
<p>Cover Page</p>
</li><li>
<p>NDA</p>
</li><li>
<p>Purchase Agreement</p>
</li></ol>

<p>All three forms require personal user input: Full name and address. NDA and
Purchase agreement also require recipient&#39;s full name and address. We
end up with four fields:</p>
<ol><li>
<p>Full name</p>
</li><li>
<p>Address</p>
</li><li>
<p>Recipient&#39;s Full name</p>
</li><li>
<p>Recipient&#39;s Address</p>
</li></ol>

<p>By having user input for all four fields, we can fill the three templates
altogether and export as filled PDF or HTML files.</p>

<p>Since Cover Page doesn&#39;t require recipient fields, we can group our
forms and fields in tags:</p>
<ul><li>
<p><strong>with_recipient:</strong> forms 2 and 3, fields 3 and 4</p>
</li><li>
<p><strong>without_recipient:</strong> form 1, fields 1 and 2</p>
</li></ul>

<p>Now, if we only fill the cover page, we don&#39;t need to pass all the
fields:</p>

<pre class="ruby"><span class="ruby-identifier">pdf_file</span> = <span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">export_form_to_pdf</span>(:<span class="ruby-identifier">cover_page</span>, <span class="ruby-string">&#39;without_recipient&#39;</span>)
</pre>

<p>This will make the call more efficient, as it will pass only
&#39;without_recipient&#39; fields.</p>

<h3 id="label-Form+Fields">Form Fields<span><a href="#label-Form+Fields">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>In YAML configuration:</p>

<pre>form_fields:
  [field_unique_id]:
    name: (required) Text that will be displayed to user when generating an input form.
    field_type: (optional) One of the following: text, boolean, number, enum or multiple. Default - text
    tags: (optional) one or more tag that this field belongs to, e.g. &#39;without_recipient&#39;
    default_value: (optional) default value for filling templates without user input. Boolean field_type: true/false. Enum field_type: the selected value, zero-based.
    enumeration: (required if field_type is enum) a list of at least two options

 forms:
   [form_unique_id]:
     path: (required) a file path to the form, or actual form html. The file path can be absolute or relative to config directory.
     tags: (optional) one or more tags that this form belongs to, e.g. &#39;without_recipient&#39;</pre>

<p>Localization: form_field name and enumeration can have localized version.
If not stated, <a href="Formalizer.html">Formalizer</a> will use
Application&#39;s locale (<code>I18n.locale</code>). Otherwise, use this
syntax:</p>

<pre>form_fields
  gender:
    name:
      en: gender
      es: género
    field_type: enum
    enumeration:
      en:
        - Male
        - Female
        - Irrelevant
      es:
        - Masculino
        - Feminino
        - Irrelevante</pre>

<h2 id="label-Generating+user+details+form">Generating user details form<span><a href="#label-Generating+user+details+form">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>In the above example, we had four fields to be filled with user data. We
can generate an html form for receiving input data:</p>

<pre class="ruby"><span class="ruby-comment"># Creating a Formalizer instance</span>
<span class="ruby-identifier">formalizer</span> = <span class="ruby-constant">Formalizer</span>.<span class="ruby-identifier">new</span>

<span class="ruby-comment"># Formalizer::generate_fields_form locale = I18n.locale, form_action = &#39;&#39;, tag = nil</span>
<span class="ruby-identifier">simple_form</span> = <span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">generate_fields_form</span>
<span class="ruby-comment"># this will create a &lt;form&gt; with all four fields</span>

<span class="ruby-comment"># more specific versions:</span>
<span class="ruby-identifier">localized_form</span> = <span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">generate_fields_form</span>(:<span class="ruby-identifier">es</span>)
<span class="ruby-identifier">form_with_action</span> = <span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">generate_fields_form</span>(<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">locale</span>, <span class="ruby-string">&#39;post_fields&#39;</span>)
<span class="ruby-identifier">partial_form</span> = <span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">generate_fields_form</span>(<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">locale</span>, <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-string">&#39;without_recipient&#39;</span>)
</pre>

<h2 id="label-HTML+images+and+styles">HTML images and styles<span><a href="#label-HTML+images+and+styles">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Binding happens at the server, so we need absolute file paths to images and
css files. See the demo for specific code examples. Basically your html can
look like this:</p>

<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Cover Page&lt;/title&gt;
      &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/assets/form.css&quot;&gt;
      &lt;meta charset=&quot;UTF-8&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div&gt;
    &lt;img src=&#39;/assets/acme_logo.jpg&#39; /&gt;
    &lt;img src=&#39;https://raw.githubusercontent.com/talyaniv/formalizer/master/test/dummy/app/assets/images/acme_logo.jpg&#39; /&gt;
    &lt;h1&gt;Cover Page&lt;/h1&gt;
    Name: &lt;formalizer id=&quot;recipient&quot; required&gt;______________________________&lt;/formalizer&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>

<p><a href="Formalizer.html">Formalizer</a> will know how to use external URLs
or find files (css and images) inside your app&#39;s assets directory. If
your files reside elsewhere, you will need to give an absolute file://
link. <a href="Formalizer.html">Formalizer</a> <strong>does not</strong>
convert style/css url()s in the current version.</p>

<h2 id="label-Advanced-3A+Using+Formalizer+programatically">Advanced: Using <a href="Formalizer.html">Formalizer</a> programatically<span><a href="#label-Advanced-3A+Using+Formalizer+programatically">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>So you want to skip the config file and DIY:</p>

<pre class="ruby"><span class="ruby-comment"># Creating a Formalizer instance</span>
<span class="ruby-identifier">formalizer</span> = <span class="ruby-constant">Formalizer</span>.<span class="ruby-identifier">new</span>

<span class="ruby-comment"># adding a form from a file, located in config directory</span>
<span class="ruby-comment"># Formalizer::add_form (symbol) id, (hash) details</span>
<span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">add_form</span>(:<span class="ruby-identifier">form1</span>, {<span class="ruby-identifier">path</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;form1.html&#39;</span>})

<span class="ruby-comment"># creating a field</span>
<span class="ruby-comment"># Formalizer::add_form_field (hash) details</span>
<span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">add_form_field</span>({<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">field1</span>, <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;email&#39;</span>})

<span class="ruby-comment"># filling the template with user input</span>
<span class="ruby-comment"># Formalizer::field_field (Symbol) field_id, field_value</span>
<span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">fill_field</span> :<span class="ruby-identifier">field1</span>, <span class="ruby-string">&#39;john@doe.com&#39;</span>

<span class="ruby-comment"># Exporting</span>
<span class="ruby-identifier">formalizer</span>.<span class="ruby-identifier">export_form_to_pdf</span>(:<span class="ruby-identifier">form1</span>)
</pre>

<h2 id="label-Contributing+to+Formazlizer">Contributing to Formazlizer<span><a href="#label-Contributing+to+Formazlizer">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Check out the latest master to make sure the feature hasn&#39;t been
implemented or the bug hasn&#39;t been fixed yet</p>
</li><li>
<p>Check out the issue tracker to make sure someone already hasn&#39;t
requested it and/or contributed it</p>
</li><li>
<p>Fork the project</p>
</li><li>
<p>Start a feature/bugfix branch</p>
</li><li>
<p>Commit and push until you are happy with your contribution</p>
</li><li>
<p>Make sure to add tests for it. Tests are important for future stability!
Run tests before pushing.</p>
</li><li>
<p>If you uncommented the root <a href="Gemfile.html">Gemfile</a>, remember to
comment it again.</p>
</li><li>
<p>Feel free to email and report issues!</p>
</li></ul>

<h2 id="label-TODO-3A">TODO:<span><a href="#label-TODO-3A">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Parse style/css url() directives</p>
</li><li>
<p>Sign documents with external API, e.g. Docusign</p>
</li></ul>

<h2 id="label-Copyright">Copyright<span><a href="#label-Copyright">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Copyright © 2015 Tal Yaniv. See MIT-LICENSE for further details.</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

